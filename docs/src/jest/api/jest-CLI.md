---
id: cli
title: Jest CLI Options
---

# Les options CLI de Jest

Le programme d'exécution de la ligne de commande `jest` dispose d'un certain nombre d'options utiles. Vous pouvez lancer `jest --help` pour voir toutes les options disponibles. La plupart des options présentées ci-dessous peuvent également être utilisées ensemble pour effectuer des tests exactement comme vous le souhaitez. Chacune des options de Jest [Configuration](Configuration.md) peut également être spécifiée par le CLI.

En voici un bref aperçu :

## En ligne de commande

Effectue tous les tests (par défaut):

```bash
jest
```

Effectue seulement les tests qui ont été spécifiez avec un modèle ou un nom de fichier :

```bash
jest my-test #or
jest path/to/my-test.js
```

Effectue des tests relatifs aux fichiers modifiés sur la base hg/git (fichier non engagés):

```bash
jest -o
```

Effectue les tests relatifs à `chemin/vers/fichierA.js` et `chemin/vers/fichierB.js` :

```bash
jest --findRelatedTests path/to/fileA.js path/to/fileB.js
```

Effectue les tests qui correspondent à ce nom de spécification (correspondance avec le nom dans `describe` ou `test`, basiquement).

```bash
jest -t name-of-spec
```

Run watch mode:

```bash
jest --watch #runs jest -o by default
jest --watchAll #runs all tests
```

Le mode veille permet aussi de spécifier le nom ou le chemin d'accès à un fichier pour se concentrer sur un ensemble spécifique de tests.

## Utilisation de yarn

Si vous exécutez Jest via `yarn test`, vous pouvez passer les arguments de la ligne de commande directement en tant qu'arguments Jest.

Au lieu de :

```bash
jest -u -t="ColorPicker"
```

Vous pouvez utiliser :

```bash
yarn test -u -t="ColorPicker"
```

## Utilisation des scripts npm

Si vous exécutez Jest via `npm test`, vous pouvez toujours utiliser les arguments de la ligne de commande en insérant un `--` entre `npm test` et les arguments de Jest.

Au lieu de :

```bash
jest -u -t="ColorPicker"
```

Vous pouvez utiliser :

```bash
npm test -- -u -t="ColorPicker"
```

## Le support des arguments Camelcase & dashed

Jest prend en charge les formats des arguments en camelcase et dashed. Les exemples suivants auront un résultat égal :

```bash
jest --collect-coverage
jest --collectCoverage
```

Les arguments pouvent aussi être mélangés :

```bash
jest --update-snapshot --detectOpenHandles
```

## Les Options

_Note: Les options CLI ont la priorité sur les valeurs de la [Configuration](Configuration.md)._

<AUTOGENERATED_TABLE_OF_CONTENTS>

---

## Reference

### `jest <regexForTestFiles>`

Quand vous exécutez `jest` avec un arguement, cet argument est traité comme une expression régulière à mettre en correspondance avec les fichiers de votre projet. Il est possible d'exécuter des suites de test en fournissant un modèle. Seuls les fichiers auquels le modèle correspond seront exécutés. Selon votre terminal, vous devez peut-être citer cet argument: `jest "my.*(complex)?pattern"`. Sous Windows, vous devez utiliser `/` comme séparateur de chemin `\` comme `\\`.

### `--bail`

Alias: `-b`. Quittez la suite de test immédiatement après le nombre `n` de suites de tests échouées. La valeur par défaut est `1`.

### `--cache`

L'utilisation de cache est par défaut 'vrai'. Pour désactiver le cache utiliser `--no-cache`. _Note: le cache doit être désactivé que si vous rencontrez des problèmes liés à la mise en cache. En moyenne, la désactiation du cache rend Jest deux fois plus lent._

Si vous voulez inspecter le cache, utiliser `--showConfig` et regarder la valeur de `cacheDirectory`. Si vous devez nettoyer le cache, utilisez `--clearCache`.

### `--changedFilesWithAncestor`

Exécute des tests liés aux changement actuels et aux changements effectués lors du dernier commit. Se comporte de la même manière que `--onlyChanged`.

### `--changedSince`

Exécute des tests liés aux changements depuis la branche fournie. Si la branche actuelle a divergé de la branche donnée, alors seuls les changements effectués localement seront testés. Se comporte de la même manière que `--onlyChanged`.


### `--ci`

Lorsque cette option est proposée, Jest suppose qu'il fonctionne dans un environnement CI. Cela change le comportement lorsqu'un nouvel instantané est rencontré. Au lieu de stocker automatiquement un nouvel instantané, le test échouera et Jest devra être exécuté avec `--updateSnapshot`.


### `--clearCache`

Supprime le répertoire de cache de Jest et quitte ensuite sans effectuer de tests. Supprime le `cacheDirectory` si l'option est passée, ou le répertoire de cache par défaut de Jest. Le répertoire de cache par défaut peut être trouvé en appelant `jest --showConfig`. _Note : la suppression du cache réduira les performances_.

### `--collectCoverageFrom=<glob>`

Un modèle de globalité relatif à `rootDir` correspondant aux fichiers dans lesquels les informations de couverture doivent être collectées.

### `--colors`

Les résultats des tests des forces sont mis en évidence même si la sortie standard n'est pas un ATS.

### `--config=<path>`

Alias : `-c`. Le chemin vers un fichier de configuration Jest spécifiant comment trouver et exécuter des tests. Si aucun `rootDir` n'est défini dans le fichier de configuration, le répertoire contenant le fichier de configuration est supposé être le `rootDir` du projet. Il peut également s'agir d'une valeur codée en JSON que Jest utilisera comme configuration.

### `--coverage[=<boolean>]`

Alias : `--collectCoverage`. Indique que les informations sur la couverture des tests doivent être collectées et rapportées dans la sortie. Passez optionnellement `<boolean>` pour remplacer l'option définie dans la configuration.
### `--coverageProvider=<provider>`

Indique quel fournisseur doit être utilisé pour instrumenter le code pour la couverture. Les valeurs autorisées sont `babel` (par défaut) ou "v8".

Notez que l'utilisation de `v8` est considérée comme expérimentale. Il utilise la couverture du code intégré de V8 plutôt qu'un code basé sur Babel. Il n'est pas aussi bien testé, et il a également été amélioré dans les dernières versions de Node. L'utilisation des dernières versions de Node (v14 au moment où nous écrivons ces lignes) donnera de meilleurs résultats.

### `--debug`

Imprimez les informations de débogage de votre configuration Jest.

### `--detectOpenHandles`

Tentative de collecte et d'impression de poignées ouvertes empêchant la sortie propre de Jest. Utilisez ceci dans les cas où vous devez utiliser "--forceExit" pour que Jest puisse sortir afin de retrouver la raison éventuelle. Cela implique `--runInBand`, ce qui permet de faire des tests en série. Implémenté en utilisant [`async_hooks`](https://nodejs.org/api/async_hooks.html). Cette option a une pénalité de performance significative et ne devrait être utilisée que pour le débogage.

### `--env=<environment>`

L'environnement de test utilisé pour tous les tests. Il peut pointer vers n'importe quel fichier ou module de nœud. Exemples : jsdom", "node" ou "path/to/myenvironment.js".

### `--errorOnDeprecated`

Faites e sorte que les API obsolètes envoient des messages d'erreur utiles. Utile pour faciliter le processus de mise à niveau.

### `--expand`

Alias: `-e`. Utilisez ce drapeau pour afficher les différences et erreurs complètes au lieu d'un patch.

### `--findRelatedTests <spaceSeparatedListOfSourceFiles>`

Trouvez et exécutez les tests qui couvrent une liste de fichiers sources séparés par des espaces et qui ont été passés en argument. Utile pour l'intégration  du hook pré-commit pour exécuter le minimum de tests nécessaires. Peut être utilisé avec `--coverage` pour inclure une couverture de test pour les fichiers sources, pas de duplication des arguments `--collectCoverageFrom` nécessaire.

### `--forceExit`

Forcer Jest à sortir après que tous les tests aient été effectués. Ceci est utile lorsque les ressources mises en place par le code de test ne peuvent pas être nettoyées de manière adéquate. _Note : Cette fonction est une trappe d'échappement. Si Jest ne se termine pas à la fin d'un test, cela signifie que les ressources externes sont toujours maintenues ou que des temporisateurs sont toujours en attente dans votre code. Il est conseillé de démonter les ressources externes après chaque test pour s'assurer que Jest peut s'éteindre proprement. Vous pouvez utiliser `--detectOpenHandles` pour vous aider à le retrouver_.

### `--help`

Afficher les informations d'aide, similaires à cette page.

### `--init`

Générer un fichier de configuration de base. En fonction de votre projet, Jest vous posera quelques questions qui vous aideront à générer un fichier `jest.config.js` avec une courte description pour chaque option.

### `--json`

Prints the test results in JSON. This mode will send all other test output and user messages to stderr.

### `--outputFile=<filename>`

Ecrire les résultats des tests dans un fichier lorsque l'option `--json` est également spécifiée. La structure JSON renvoyée est documentée dans [testResultsProcessor](Configuration.md#testresultsprocessor-string).

### `--lastCommit`

Exécutez tous les tests affectés par les changements de fichiers dans le dernier commit effectué. Se comporte de manière similaire à `--onlyChanged`.

### `--listTests`

Liste tous les tests en tant que JSON que Jest va exécuter compte tenu des arguments, et sort. Ceci peut être utilisé avec `--findRelatedTests` pour savoir quels tests Jest va exécuter.

### `--logHeapUsage`

Enregistre l'utilisation du tas après chaque test. Utile pour déboguer les fuites de mémoire. S'utilise avec `--runInBand` et `--expose-gc` dans le noeud.

### `--maxConcurrency=<num>`

Empêche Jest d'exécuter simultanément plus de tests que la quantité spécifiée. N'affecte que les tests qui utilisent `test.concurrent`.

### `--maxWorkers=<num>|<string>`

Alias : `w`. Spécifie le nombre maximum de travailleurs que le groupe de travailleurs va engendrer pour effectuer des tests. En mode d'exécution unique, le nombre de noyaux disponibles sur votre machine moins un pour le fil principal est utilisé par défaut. En mode veille, le nombre par défaut est de la moitié des noyaux disponibles sur votre machine pour garantir que Jest est discret et ne broie pas votre machine à l'arrêt. Il peut être utile d'ajuster cette valeur dans les environnements à ressources limitées comme les CI, mais les valeurs par défaut devraient être adéquates pour la plupart des cas d'utilisation.

Pour les environnements disposant d'unités centrales variables, vous pouvez utiliser une configuration basée sur le pourcentage : `--maxWorkers=50%`.

### `--noStackTrace`

Désactive la trace de la pile dans la sortie des résultats des tests.

### `--notify`

Active les notifications des résultats des tests. Bon pour quand vous ne voulez pas que votre conscience puisse se concentrer sur autre chose que les tests JavaScript.

### `--onlyChanged`

Alias : `-o`. Tentatives d'identification des tests à exécuter en fonction des fichiers qui ont été modifiés dans le dépôt actuel. Ne fonctionne que si vous exécutez des tests dans un dépôt git/hg en ce moment et nécessite un graphe de dépendance statique (c'est-à-dire qu'aucune dynamique n'est nécessaire).

### `--passWithNoTests`

Permet à la suite de test de réussir lorsqu'aucun fichier n'est trouvé.

### `--projects <path1> ... <pathN>`

Effectuer des tests à partir d'un ou plusieurs projets, trouvés dans les chemins spécifiés ; prend également des chemins globaux. Cette option est l'équivalent CLI de l'option de configuration [`projects`](configuration#projects-arraystring--projectconfig). Notez que si les fichiers de configuration sont trouvés dans les chemins spécifiés, _tous_ les projets spécifiés dans ces fichiers de configuration seront exécutés.

### `--reporters`

Effectuez des tests avec des rapporteurs spécifiques. Les [options des rapporteurs](configuration#reporters-arraymodulename--modulename-options) ne sont pas disponibles via le CLI. Exemple avec plusieurs rapporteurs :

`jest --reporters="default" --reporters="jest-junit"`

### `--runInBand`

Alias : "-i". Effectuer tous les tests en série dans le processus en cours, plutôt que de créer un groupe de processus enfants qui effectuent des tests. Cela peut être utile pour le débogage.

### `--selectProjects <project1> ... <projectN>`

N'effectuez que les tests des projets spécifiés. Jest utilise l'attribut `displayName` dans la configuration pour identifier chaque projet. Si vous utilisez cette option, vous devez fournir un `displayName` à tous vos projets.

### `--runTestsByPath`

N'effectuez que les tests qui ont été spécifiés avec leurs trajectoires exactes.

_Note : La correspondance de regex par défaut fonctionne bien sur de petites séries, mais devient lente si elle est fournie avec des modèles multiples et/ou contre un grand nombre de tests. Cette option remplace la logique de correspondance de regex et optimise ainsi le temps que Jest prend pour filtrer des fichiers de test spécifiques_

### `--setupTestFrameworkScriptFile=<file>`

Le chemin vers un module qui exécute un certain code pour configurer ou mettre en place le cadre de test avant chaque test. Attention, les fichiers importés par le script de configuration ne seront pas simulés pendant les tests.

### `--showConfig`

Imprimez votre configuration Jest, puis quittez.

### `--silent`

Empêcher les tests d'imprimer des messages via la console.

### `--testNamePattern=<regex>`

Alias : `-t`. N'effectuez que des tests avec un nom qui correspond à la regex. Par exemple, supposons que vous ne vouliez exécuter que des tests liés à l'autorisation qui auront des noms comme `"GET /api/posts with auth"`, alors vous pouvez utiliser `jest -t=auth`.

Note : La regex est comparée au nom complet, qui est une combinaison du nom du test et de tous les blocs de description qui l'entourent.

### `--testLocationInResults`

Ajout d'un champ `localisation` pour les résultats des tests. Utile si vous voulez signaler le lieu d'un test dans un rapport.

Notez que la `column` est indexée à 0 alors que la `line` ne l'est pas.

```json
{
  "column": 4,
  "line": 5
}
```

### `--testPathPattern=<regex>`

Une chaîne de motifs regexp qui est comparée à tous les chemins de test avant d'exécuter le test. Sous Windows, vous devrez utiliser `/` comme séparateur de chemin ou échapper `\` comme `\\`.

### `--testPathIgnorePatterns=[array]`

Un ensemble de chaînes de motifs regexp qui sont testées par rapport à tous les chemins de test avant d'être exécutées. Contrairement à `--testPathPattern`, il n'exécutera ces tests qu'avec un chemin qui ne correspond pas aux expressions regexp fournies.

### `--testRunner=<path>`

Vous permettez  de spécifier un testeur personnalisé.

### `--testSequencer=<path>`

Permet de spécifier un séquenceur de test personnalisé. Veuillez vous référer à la documentation de la propriété de configuration correspondante pour plus de détails.

### `--testTimeout=<number>`

Délai d'attente par défaut d'un test en millisecondes. Valeur par défaut : 5000.

### `--updateSnapshot`

Alias : `-u`. Utilisez ce drapeau pour réenregistrer chaque instantané qui échoue pendant ce test. Peut être utilisé avec un modèle de suite de tests ou avec `--testNamePattern` pour réenregistrer les instantanés.

### `--useStderr`

Déviez toutes les sorties vers stderr (standard error).

### `--verbose`

Afficher les résultats des tests individuels avec la hiérarchie des suites de tests.

### `--version`

Alias : "v". Imprimez la version et quittez.

### `--watch`

Surveillez les fichiers pour les modifications et refaites les tests liés aux fichiers modifiés. Si vous voulez relancer tous les tests lorsqu'un fichier a été modifié, utilisez plutôt l'option `--watchAll`.

### `--watchAll`

Surveillez les fichiers pour détecter les changements et refaites tous les tests lorsque quelque chose change. Si vous voulez relancer uniquement les tests qui dépendent des fichiers modifiés, utilisez l'option `--watch`.

Utilisez `--watchAll=false` pour désactiver explicitement le mode de surveillance. Notez que dans la plupart des environnements de CI, ceci est automatiquement géré pour vous.

### `--watchman`

S'il faut utiliser le gardien pour le triage des dossiers. Par défaut, c'est vrai. Désactiver l'utilisation de `--no-watchman`.
