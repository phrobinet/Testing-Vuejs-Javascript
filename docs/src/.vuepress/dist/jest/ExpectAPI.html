<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Expect | Test in Javascript</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Testing Vuejs and JS">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.f1075b4d.css" as="style"><link rel="preload" href="/assets/js/app.1dfb11b9.js" as="script"><link rel="preload" href="/assets/js/2.76e9c098.js" as="script"><link rel="preload" href="/assets/js/16.2062fdae.js" as="script"><link rel="prefetch" href="/assets/js/10.bd6fd6a5.js"><link rel="prefetch" href="/assets/js/100.e4707484.js"><link rel="prefetch" href="/assets/js/101.e6d01fe0.js"><link rel="prefetch" href="/assets/js/102.03e4577c.js"><link rel="prefetch" href="/assets/js/103.533425bb.js"><link rel="prefetch" href="/assets/js/104.7866060c.js"><link rel="prefetch" href="/assets/js/105.c87ae376.js"><link rel="prefetch" href="/assets/js/106.1470de17.js"><link rel="prefetch" href="/assets/js/107.31d6eb75.js"><link rel="prefetch" href="/assets/js/108.8ab8ef28.js"><link rel="prefetch" href="/assets/js/109.f31541ff.js"><link rel="prefetch" href="/assets/js/11.1abf9ce7.js"><link rel="prefetch" href="/assets/js/110.7b3f1636.js"><link rel="prefetch" href="/assets/js/111.2f2eac6f.js"><link rel="prefetch" href="/assets/js/112.e118dccb.js"><link rel="prefetch" href="/assets/js/113.a8a30aa2.js"><link rel="prefetch" href="/assets/js/114.c9cd627f.js"><link rel="prefetch" href="/assets/js/115.a4796295.js"><link rel="prefetch" href="/assets/js/116.85cb9bc4.js"><link rel="prefetch" href="/assets/js/117.9857c369.js"><link rel="prefetch" href="/assets/js/118.fdd75f70.js"><link rel="prefetch" href="/assets/js/119.480af062.js"><link rel="prefetch" href="/assets/js/12.48bd50ee.js"><link rel="prefetch" href="/assets/js/120.0903be09.js"><link rel="prefetch" href="/assets/js/121.9e357b85.js"><link rel="prefetch" href="/assets/js/122.809a4b0c.js"><link rel="prefetch" href="/assets/js/123.e2038edd.js"><link rel="prefetch" href="/assets/js/124.4af8a9cc.js"><link rel="prefetch" href="/assets/js/125.b77a97ef.js"><link rel="prefetch" href="/assets/js/126.82f59f13.js"><link rel="prefetch" href="/assets/js/127.f41bdaff.js"><link rel="prefetch" href="/assets/js/128.5fca6b14.js"><link rel="prefetch" href="/assets/js/129.59147136.js"><link rel="prefetch" href="/assets/js/13.85e5e853.js"><link rel="prefetch" href="/assets/js/130.01fec4c9.js"><link rel="prefetch" href="/assets/js/131.bf32c3d1.js"><link rel="prefetch" href="/assets/js/132.5072c74e.js"><link rel="prefetch" href="/assets/js/133.e85de282.js"><link rel="prefetch" href="/assets/js/134.402e4e27.js"><link rel="prefetch" href="/assets/js/135.6dd89c1c.js"><link rel="prefetch" href="/assets/js/136.22ed1db4.js"><link rel="prefetch" href="/assets/js/137.72ab073c.js"><link rel="prefetch" href="/assets/js/138.c39958ee.js"><link rel="prefetch" href="/assets/js/139.1aa20bea.js"><link rel="prefetch" href="/assets/js/14.330cbcd9.js"><link rel="prefetch" href="/assets/js/140.c4b7b7a6.js"><link rel="prefetch" href="/assets/js/141.00a6b127.js"><link rel="prefetch" href="/assets/js/142.dc56159a.js"><link rel="prefetch" href="/assets/js/143.56bf7306.js"><link rel="prefetch" href="/assets/js/144.dc28faf5.js"><link rel="prefetch" href="/assets/js/145.58f42865.js"><link rel="prefetch" href="/assets/js/146.cdf5ac64.js"><link rel="prefetch" href="/assets/js/147.55bfcbbc.js"><link rel="prefetch" href="/assets/js/148.80f92bd1.js"><link rel="prefetch" href="/assets/js/149.d769487a.js"><link rel="prefetch" href="/assets/js/15.425a725c.js"><link rel="prefetch" href="/assets/js/150.f7925a0b.js"><link rel="prefetch" href="/assets/js/151.6218c5b9.js"><link rel="prefetch" href="/assets/js/152.41b5cfa0.js"><link rel="prefetch" href="/assets/js/153.05501cee.js"><link rel="prefetch" href="/assets/js/154.e86f3b62.js"><link rel="prefetch" href="/assets/js/155.1c63407d.js"><link rel="prefetch" href="/assets/js/156.c045d5cd.js"><link rel="prefetch" href="/assets/js/157.f6cea34d.js"><link rel="prefetch" href="/assets/js/158.7a808c51.js"><link rel="prefetch" href="/assets/js/159.b3b4561c.js"><link rel="prefetch" href="/assets/js/160.9d1f6278.js"><link rel="prefetch" href="/assets/js/161.cf4ec401.js"><link rel="prefetch" href="/assets/js/162.0047afe1.js"><link rel="prefetch" href="/assets/js/163.68d2b64d.js"><link rel="prefetch" href="/assets/js/164.ff770c4d.js"><link rel="prefetch" href="/assets/js/165.15d44e1b.js"><link rel="prefetch" href="/assets/js/166.0ffccc31.js"><link rel="prefetch" href="/assets/js/167.74e5cb83.js"><link rel="prefetch" href="/assets/js/168.3e987bc6.js"><link rel="prefetch" href="/assets/js/169.58a1c121.js"><link rel="prefetch" href="/assets/js/17.8ae89c4b.js"><link rel="prefetch" href="/assets/js/170.f5eb4958.js"><link rel="prefetch" href="/assets/js/171.de2ac02b.js"><link rel="prefetch" href="/assets/js/172.e723173f.js"><link rel="prefetch" href="/assets/js/173.ebe3373d.js"><link rel="prefetch" href="/assets/js/174.754bc705.js"><link rel="prefetch" href="/assets/js/175.68256c4c.js"><link rel="prefetch" href="/assets/js/176.0f54fcc6.js"><link rel="prefetch" href="/assets/js/177.eca24763.js"><link rel="prefetch" href="/assets/js/178.a53fc0b4.js"><link rel="prefetch" href="/assets/js/179.76c93623.js"><link rel="prefetch" href="/assets/js/18.2d051dd7.js"><link rel="prefetch" href="/assets/js/180.89a3951a.js"><link rel="prefetch" href="/assets/js/181.5545787b.js"><link rel="prefetch" href="/assets/js/182.44e30a17.js"><link rel="prefetch" href="/assets/js/183.98f27b20.js"><link rel="prefetch" href="/assets/js/184.8440af44.js"><link rel="prefetch" href="/assets/js/185.000aeddf.js"><link rel="prefetch" href="/assets/js/186.d6b8251b.js"><link rel="prefetch" href="/assets/js/187.31fa426e.js"><link rel="prefetch" href="/assets/js/188.58ccf322.js"><link rel="prefetch" href="/assets/js/189.c2ecd64b.js"><link rel="prefetch" href="/assets/js/19.7680ca75.js"><link rel="prefetch" href="/assets/js/190.6585dda4.js"><link rel="prefetch" href="/assets/js/191.ac09d6be.js"><link rel="prefetch" href="/assets/js/192.569eadde.js"><link rel="prefetch" href="/assets/js/193.dbc5d0c3.js"><link rel="prefetch" href="/assets/js/194.1ed49f10.js"><link rel="prefetch" href="/assets/js/195.73d17c86.js"><link rel="prefetch" href="/assets/js/196.38585136.js"><link rel="prefetch" href="/assets/js/197.80be5379.js"><link rel="prefetch" href="/assets/js/198.d2983630.js"><link rel="prefetch" href="/assets/js/199.c5b0eaae.js"><link rel="prefetch" href="/assets/js/20.92722f5a.js"><link rel="prefetch" href="/assets/js/200.d293a5ee.js"><link rel="prefetch" href="/assets/js/201.845153bc.js"><link rel="prefetch" href="/assets/js/202.c1a3aeac.js"><link rel="prefetch" href="/assets/js/203.fe05addc.js"><link rel="prefetch" href="/assets/js/21.be6446d5.js"><link rel="prefetch" href="/assets/js/22.68cd31e9.js"><link rel="prefetch" href="/assets/js/23.bdf61bc1.js"><link rel="prefetch" href="/assets/js/24.53cdec02.js"><link rel="prefetch" href="/assets/js/25.ebc52990.js"><link rel="prefetch" href="/assets/js/26.6c0a0e32.js"><link rel="prefetch" href="/assets/js/27.47a1acf9.js"><link rel="prefetch" href="/assets/js/28.9325d706.js"><link rel="prefetch" href="/assets/js/29.5805cc76.js"><link rel="prefetch" href="/assets/js/3.55e527b8.js"><link rel="prefetch" href="/assets/js/30.c432e70c.js"><link rel="prefetch" href="/assets/js/31.3b720485.js"><link rel="prefetch" href="/assets/js/32.8badbdd6.js"><link rel="prefetch" href="/assets/js/33.748d0532.js"><link rel="prefetch" href="/assets/js/34.c3eda56a.js"><link rel="prefetch" href="/assets/js/35.71847246.js"><link rel="prefetch" href="/assets/js/36.0611c91e.js"><link rel="prefetch" href="/assets/js/37.ba71a4af.js"><link rel="prefetch" href="/assets/js/38.ac6f30d4.js"><link rel="prefetch" href="/assets/js/39.58ba7a9e.js"><link rel="prefetch" href="/assets/js/4.bf905f50.js"><link rel="prefetch" href="/assets/js/40.26590aff.js"><link rel="prefetch" href="/assets/js/41.694f8d58.js"><link rel="prefetch" href="/assets/js/42.2d7d8d44.js"><link rel="prefetch" href="/assets/js/43.9cec6759.js"><link rel="prefetch" href="/assets/js/44.f7719b56.js"><link rel="prefetch" href="/assets/js/45.939a097b.js"><link rel="prefetch" href="/assets/js/46.9eb035b4.js"><link rel="prefetch" href="/assets/js/47.717699f5.js"><link rel="prefetch" href="/assets/js/48.e2a83d9e.js"><link rel="prefetch" href="/assets/js/49.0f4a38a5.js"><link rel="prefetch" href="/assets/js/5.44066470.js"><link rel="prefetch" href="/assets/js/50.09b9cedf.js"><link rel="prefetch" href="/assets/js/51.ca236e5a.js"><link rel="prefetch" href="/assets/js/52.8ab1dd65.js"><link rel="prefetch" href="/assets/js/53.4950b2fa.js"><link rel="prefetch" href="/assets/js/54.6c28a1ae.js"><link rel="prefetch" href="/assets/js/55.203bfda1.js"><link rel="prefetch" href="/assets/js/56.feea9280.js"><link rel="prefetch" href="/assets/js/57.bbd935c4.js"><link rel="prefetch" href="/assets/js/58.98b7e31b.js"><link rel="prefetch" href="/assets/js/59.11977924.js"><link rel="prefetch" href="/assets/js/6.ffe6f60a.js"><link rel="prefetch" href="/assets/js/60.fef4549b.js"><link rel="prefetch" href="/assets/js/61.5cac46d9.js"><link rel="prefetch" href="/assets/js/62.96cd90d5.js"><link rel="prefetch" href="/assets/js/63.66c5a79a.js"><link rel="prefetch" href="/assets/js/64.57532410.js"><link rel="prefetch" href="/assets/js/65.d081c48d.js"><link rel="prefetch" href="/assets/js/66.cfb836a0.js"><link rel="prefetch" href="/assets/js/67.7b4dd45f.js"><link rel="prefetch" href="/assets/js/68.e7ebbee9.js"><link rel="prefetch" href="/assets/js/69.68324175.js"><link rel="prefetch" href="/assets/js/7.a00e933e.js"><link rel="prefetch" href="/assets/js/70.27518c57.js"><link rel="prefetch" href="/assets/js/71.7a58fc57.js"><link rel="prefetch" href="/assets/js/72.08c01f3b.js"><link rel="prefetch" href="/assets/js/73.1d2fa4b2.js"><link rel="prefetch" href="/assets/js/74.a06f107c.js"><link rel="prefetch" href="/assets/js/75.ac9e2bd1.js"><link rel="prefetch" href="/assets/js/76.899208f6.js"><link rel="prefetch" href="/assets/js/77.0f1d0c65.js"><link rel="prefetch" href="/assets/js/78.8a73a4c3.js"><link rel="prefetch" href="/assets/js/79.e2db69cb.js"><link rel="prefetch" href="/assets/js/8.d194c183.js"><link rel="prefetch" href="/assets/js/80.b61d7063.js"><link rel="prefetch" href="/assets/js/81.a82b5e62.js"><link rel="prefetch" href="/assets/js/82.9a5b8058.js"><link rel="prefetch" href="/assets/js/83.10352c38.js"><link rel="prefetch" href="/assets/js/84.ccacae49.js"><link rel="prefetch" href="/assets/js/85.ee9987ed.js"><link rel="prefetch" href="/assets/js/86.f89fad1c.js"><link rel="prefetch" href="/assets/js/87.44e47fe2.js"><link rel="prefetch" href="/assets/js/88.94dfbf30.js"><link rel="prefetch" href="/assets/js/89.04227930.js"><link rel="prefetch" href="/assets/js/9.2250d602.js"><link rel="prefetch" href="/assets/js/90.7a82ea28.js"><link rel="prefetch" href="/assets/js/91.4a625cbe.js"><link rel="prefetch" href="/assets/js/92.29d2fcc3.js"><link rel="prefetch" href="/assets/js/93.3223892e.js"><link rel="prefetch" href="/assets/js/94.7584ac0d.js"><link rel="prefetch" href="/assets/js/95.75db5c06.js"><link rel="prefetch" href="/assets/js/96.bf62c5a6.js"><link rel="prefetch" href="/assets/js/97.66fdd036.js"><link rel="prefetch" href="/assets/js/98.c9d329be.js"><link rel="prefetch" href="/assets/js/99.b6f9c026.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f1075b4d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Test in Javascript</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-test-utils/" class="nav-link">
  Vue-Test-Utils
</a></div><div class="nav-item"><a href="/vue-testing-handbook/" class="nav-link">
  Le manuel de lmiller1990
</a></div><div class="nav-item"><a href="/jest/" class="nav-link router-link-active">
  Jest
</a></div><div class="nav-item"><a href="/mocha/" class="nav-link">
  Mocha
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-test-utils/" class="nav-link">
  Vue-Test-Utils
</a></div><div class="nav-item"><a href="/vue-testing-handbook/" class="nav-link">
  Le manuel de lmiller1990
</a></div><div class="nav-item"><a href="/jest/" class="nav-link router-link-active">
  Jest
</a></div><div class="nav-item"><a href="/mocha/" class="nav-link">
  Mocha
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Jest</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jest/" aria-current="page" class="sidebar-link">Jest</a></li><li><a href="/jest/introduction.html" class="sidebar-link">Pour commencer</a></li><li><a href="/jest/guides.html" class="sidebar-link">Tests instantanés</a></li><li><a href="/jest/framework.html" class="sidebar-link">Tester les Apps React</a></li><li><a href="/jest/api.html" class="sidebar-link">Les api générales</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>Lorsque vous passez des tests, vous devez souvent vérifier que les valeurs répondent à certaines conditions. <code>expect</code> vous donne accès à un certain nombre de &quot;matchers&quot; qui vous permettent de valider différentes choses.</p> <p>Pour obtenir d'autres &quot;matchers&quot; Jest, gérés par la communauté Jest, consultez [<code>jest-extended</code>] (https://github.com/jest-community/jest-extended).</p> <h2 id="les-methodes"><a href="#les-methodes" class="header-anchor">#</a> Les méthodes</h2> <AUTOGENERATED_TABLE_OF_CONTENTS><hr> <h2 id="les-references"><a href="#les-references" class="header-anchor">#</a> Les références</h2> <h3 id="expect-value"><a href="#expect-value" class="header-anchor">#</a> <code>expect(value)</code></h3> <p>La fonction <code>expect</code> est utilisée chaque fois que vous voulez tester une valeur. Il est rare que vous appeliez la fonction <code>expect</code> par elle-même. Au lieu de cela, vous utiliserez <code>expect</code> avec une fonction &quot;matcher&quot; pour affirmer quelque chose sur la valeur.</p> <p>Il est plus facile de comprendre cela avec un exemple. Disons que vous avez une méthode <code>bestLaCroixFlavor()</code> qui est censée retourner la chaîne <code>'grapefruit'</code>. Voici comment vous pourriez tester cela :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'the best flavor is grapefruit'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">bestLaCroixFlavor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'grapefruit'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Dans ce cas, <code>toBe</code> est une fonction d'appariement. Il existe un grand nombre de fonctions de matcher différentes, documentée ci-dessous, pour vous aider à tester différentes choses.</p> <p>L'argument <code>expect</code> doit être la valeur que votre code produit, et tout argument  au matcher doit être la valeur correcte. Si vous les mélangez, vos tests fonctionneront toujours, mais les messages d'erreur des tests d'échoués seront étranges.</p> <h3 id="expect-extend-matchers"><a href="#expect-extend-matchers" class="header-anchor">#</a> <code>expect.extend(matchers)</code></h3> <p>Vous pouvez utiliser <code>expect.extend</code> pour ajouter vos propres correspondants à Jest. Par exemple, disons que vous testez une bibliothèque d'utilitaires de nombres et que vous affirmez fréquemment que des nombres apparaissent dans des plages particulières d'autres nombres. Vous pourriez résumer cela dans un appariement <code>toBeWithinRange</code> :</p> <div class="language-js extra-class"><pre class="language-js"><code>expect<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">toBeWithinRange</span><span class="token punctuation">(</span><span class="token parameter">received<span class="token punctuation">,</span> floor<span class="token punctuation">,</span> ceiling</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> pass <span class="token operator">=</span> received <span class="token operator">&gt;=</span> floor <span class="token operator">&amp;&amp;</span> received <span class="token operator">&lt;=</span> ceiling<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">message</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">expected </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>received<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> not to be within range </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>floor<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ceiling<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        pass<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">message</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">expected </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>received<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to be within range </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>floor<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ceiling<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        pass<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'numeric ranges'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeWithinRange</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBeWithinRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>apples<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> bananas<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    apples<span class="token operator">:</span> expect<span class="token punctuation">.</span><span class="token function">toBeWithinRange</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    bananas<span class="token operator">:</span> expect<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBeWithinRange</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>_Note : En TypeScript, lorsque vous utilisez <code>@types/jest</code> par exemple, vous pouvez déclarer le nouveau comparateur <code>toBeWithinRange</code> comme ceci :</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> global <span class="token punctuation">{</span>
  <span class="token keyword">namespace</span> jest <span class="token punctuation">{</span>
    <span class="token keyword">interface</span> <span class="token class-name">Matchers<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
      <span class="token function">toBeWithinRange</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">R</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="les-matchers-async"><a href="#les-matchers-async" class="header-anchor">#</a> Les Matchers Async</h4> <p><code>expect.extend</code> prend également en charge les matchers asynchrones. Les matchers asynchrones renvoient une promesse, vous devrez donc attendre la valeur renvoyée. Utilisons un exemple de matcher pour illustrer leur utilisation. Nous allons implémenter un appariement appelé <code>toBeDivisibleByExternalValue</code>, où le nombre divisible sera tiré d'une source externe.</p> <div class="language-js extra-class"><pre class="language-js"><code>expect<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">toBeDivisibleByExternalValue</span><span class="token punctuation">(</span><span class="token parameter">received</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> externalValue <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getExternalValueFromRemoteSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> pass <span class="token operator">=</span> received <span class="token operator">%</span> externalValue <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">message</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">expected </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>received<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> not to be divisible by </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>externalValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        pass<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">message</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">expected </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>received<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to be divisible by </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>externalValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        pass<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'is divisible by external value'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeDivisibleByExternalValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBeDivisibleByExternalValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="les-api-personnalise-matchers"><a href="#les-api-personnalise-matchers" class="header-anchor">#</a> Les API personnalisé Matchers</h4> <p>Les correspondants doivent rendre un objet (ou une promesse d'objet) avec deux clés. La touche <code>pass</code> indique s'il y a eu correspondance ou non, et la touche <code>message</code> fournit une fonction sans argument qui renvoie un message d'erreur en cas d'échec. Ainsi, lorsque <code>pass</code> est faux, <code>message</code> devrait renvoyer le message d'erreur pour le cas où <code>expect(x).yourMatcher()</code> échouerait. Et quand &quot;pass&quot; est vrai, &quot;message&quot; doit renvoyer le message d'erreur pour le cas où <code>expect(x).not.yourMatcher()</code> échoue.</p> <p>Les correspondants sont appelés avec l'argument passé à <code>expect(x)</code> suivi par les arguments passés à <code>.yourMatcher(y, z)</code> :</p> <div class="language-js extra-class"><pre class="language-js"><code>expect<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">yourMatcher</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      pass<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token function-variable function">message</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Ces fonctions et propriétés d'aide peuvent être trouvées sur <code>this</code> à l'intérieur d'un Custom Matcher :</p> <h4 id="this-isnot"><a href="#this-isnot" class="header-anchor">#</a> <code>this.isNot</code></h4> <p>Un booléen pour vous faire savoir que ce &quot;matcher&quot; a été appelé avec le modificateur négatif <code>.not</code> vous permettant d'afficher un indice de matcher clair et correct (voir l'exemple de code).</p> <h4 id="this-promise"><a href="#this-promise" class="header-anchor">#</a> <code>this.promise</code></h4> <p>Une chaîne vous permettant d'afficher un indice de correspondance clair et correct :</p> <ul><li><code>'rejects'</code> si le matcher a été appelé avec le modificateur <code>.rejects</code> de la promesse</li> <li><code>'resolves'</code> si le matcher a été appelé avec la promesse <code>.resolves</code> modificateur</li> <li><code>''</code> si le matcher n'a pas été appelé avec un modificateur de promesse</li></ul> <h4 id="this-equals-a-b"><a href="#this-equals-a-b" class="header-anchor">#</a> <code>this.equals(a, b)</code></h4> <p>Il s'agit d'une fonction d'égalité profonde qui retournera <code>true</code> si deux objets ont les mêmes valeurs (de manière récursive).</p> <h4 id="this-expand"><a href="#this-expand" class="header-anchor">#</a> <code>this.expand</code></h4> <p>Un booléen pour vous faire savoir que ce matcher a été appelé avec une option <code>expand</code>. Lorsque Jest est appelé avec l'option <code>--expand</code>, <code>this.expand</code> peut être utilisé pour déterminer si Jest doit afficher les différences et erreurs complètes.</p> <h4 id="this-utils"><a href="#this-utils" class="header-anchor">#</a> <code>this.utils</code></h4> <p>Il existe un certain nombre d'outils utiles exposés sur <code>this.utils</code>, qui consistent principalement en des exportations de [<code>jest-matcher-utils</code>] (https://github.com/facebook/jest/tree/master/packages/jest-matcher-utils).</p> <p>Les plus utiles sont <code>matcherHint</code>, <code>printExpected</code> et <code>printReceived</code> pour formater les messages d'erreur. Par exemple, jetez un oeil à l'implémentation de l'appariement <code>toBe</code> :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> diff <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jest-diff'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
expect<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">toBe</span><span class="token punctuation">(</span><span class="token parameter">received<span class="token punctuation">,</span> expected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
      comment<span class="token operator">:</span> <span class="token string">'Object.is equality'</span><span class="token punctuation">,</span>
      isNot<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isNot<span class="token punctuation">,</span>
      promise<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>promise<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> pass <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>received<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> message <span class="token operator">=</span> pass
      <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">matcherHint</span><span class="token punctuation">(</span><span class="token string">'toBe'</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">+</span>
          <span class="token string">'\n\n'</span> <span class="token operator">+</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Expected: not </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">printExpected</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Received: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">printReceived</span><span class="token punctuation">(</span>received<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> diffString <span class="token operator">=</span> <span class="token function">diff</span><span class="token punctuation">(</span>expected<span class="token punctuation">,</span> received<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            expand<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>expand<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">matcherHint</span><span class="token punctuation">(</span><span class="token string">'toBe'</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">+</span>
            <span class="token string">'\n\n'</span> <span class="token operator">+</span>
            <span class="token punctuation">(</span>diffString <span class="token operator">&amp;&amp;</span> diffString<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'- Expect'</span><span class="token punctuation">)</span>
              <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Difference:\n\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>diffString<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
              <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Expected: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">printExpected</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
                <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Received: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">printReceived</span><span class="token punctuation">(</span>received<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>actual<span class="token operator">:</span> received<span class="token punctuation">,</span> message<span class="token punctuation">,</span> pass<span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Cela permettra d'avoir quelque chose comme ceci :</p> <div class="language-bash extra-class"><pre class="language-bash"><code>  expect<span class="token punctuation">(</span>received<span class="token punctuation">)</span>.toBe<span class="token punctuation">(</span>expected<span class="token punctuation">)</span>

    Expected value to be <span class="token punctuation">(</span>using Object.is<span class="token punctuation">)</span>:
      <span class="token string">&quot;banana&quot;</span>
    Received:
      <span class="token string">&quot;apple&quot;</span>
</code></pre></div><p>Lorsqu'une assertion échoue, le message d'erreur doit donner autant de signal que nécessaire à l'utilisateur afin qu'il puisse résoudre son problème rapidement. Vous devez élaborer un message d'échec précis pour vous assurer que les utilisateurs de vos assertions personnalisées ont une bonne expérience de développement.</p> <h4 id="personnaliser-les-matchers-snapshot"><a href="#personnaliser-les-matchers-snapshot" class="header-anchor">#</a> Personnaliser les matchers snapshot</h4> <p>Pour utiliser le test de l'instantané dans votre Custom Matcher, vous pouvez importer un <code>jest-snapshot</code> et l'utiliser dans votre Matcher.</p> <p>Voici un snapshot qui coupe une chaîne à stocker pour une longueur donnée, <code>.toMatchTrimmedSnapshot(length)</code> :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>toMatchSnapshot<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jest-snapshot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

expect<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">toMatchTrimmedSnapshot</span><span class="token punctuation">(</span><span class="token parameter">received<span class="token punctuation">,</span> length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">toMatchSnapshot</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">,</span>
      received<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">'toMatchTrimmedSnapshot'</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'stores only 10 characters'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'extra long string oh my gerd'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchTrimmedSnapshot</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
Stored snapshot will look like:

exports[`stores only 10 characters: toMatchTrimmedSnapshot 1`] = `&quot;extra long&quot;`;
*/</span>
</code></pre></div><p>Il est également possible de créer des correspondances personnalisées pour les instantanés en ligne, les instantanés seront correctement ajoutés aux correspondances personnalisées. Cependant, les instantanés en ligne essaieront toujours de s'ajouter au premier argument ou au second lorsque le premier argument est le comparateur de propriétés, il n'est donc pas possible d'accepter des arguments personnalisés dans les comparateurs personnalisés.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>toMatchInlineSnapshot<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jest-snapshot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

expect<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">toMatchTrimmedInlineSnapshot</span><span class="token punctuation">(</span><span class="token parameter">received</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">toMatchInlineSnapshot</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> received<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'stores only 10 characters'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'extra long string oh my gerd'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchTrimmedInlineSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/*
  L'instantané sera ajouté en ligne comme
  expect('extra long string oh my gerd').toMatchTrimmedInlineSnapshot(
    &quot;extra long&quot;
  ) ;
  */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="expect-anything"><a href="#expect-anything" class="header-anchor">#</a> <code>expect.anything()</code></h3> <p>Le terme <code>expect.anything()</code> correspond à tout sauf <code>null</code> ou <code>undefined</code>. Vous pouvez l'utiliser dans <code>toEqual</code> ou <code>toBeCalledWith</code> au lieu d'une valeur littérale. Par exemple, si vous voulez vérifier qu'une fonction fictive est appelée avec un argument non nul :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'map calls its argument with a non-null argument'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mock <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token function">mock</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">anything</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="expect-any-constructor"><a href="#expect-any-constructor" class="header-anchor">#</a> <code>expect.any(constructor)</code></h3> <p><code>expect.any(constructor)</code> correspond à tout ce qui a été créé avec le constructeur donné. Vous pouvez l'utiliser dans <code>toEqual</code> ou <code>toBeCalledWith</code> au lieu d'une valeur littérale. Par exemple, si vous voulez vérifier qu'une fonction fictive est appelée avec un nombre :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">randocall</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'randocall calls its callback with a number'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mock <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">randocall</span><span class="token punctuation">(</span>mock<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="expect-arraycontaining-array"><a href="#expect-arraycontaining-array" class="header-anchor">#</a> <code>expect.arrayContaining(array)</code></h3> <p>Le fichier <code>expect.arrayContaining(array)</code> correspond à un tableau reçu qui contient tous les éléments du tableau attendu. C'est-à-dire que le tableau attendu est un <strong>sous-ensemble</strong> du tableau reçu. Par conséquent, il correspond à un tableau reçu qui contient des éléments qui ne sont pas <strong>not</strong> dans le tableau attendu.</p> <p>Vous pouvez l'utiliser à la place d'une valeur littérale :</p> <ul><li>dans <code>toEqual</code> ou <code>toBeCalledWith</code>.</li> <li>pour correspondre à une propriété dans <code>objectContaining</code> ou <code>toMatchObject</code>.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'arrayContaining'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> expected <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token string">'Bob'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'matches even if received contains additional elements'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Eve'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'does not match if received does not contain expected elements'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Eve'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Beware of a misunderstanding! A sequence of dice rolls'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> expected <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'matches even with an unexpected number 7'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>
      expect<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'does not match without an expected number 2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>
      expect<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="expect-assertions-number"><a href="#expect-assertions-number" class="header-anchor">#</a> <code>expect.assertions(number)</code></h3> <p><code>expect.assertions(number)</code> verifies that a certain number of assertions are called during a test. This is often useful when testing asynchronous code, in order to make sure that assertions in a callback actually got called.</p> <p>For example, let's say that we have a function <code>doAsync</code> that receives two callbacks <code>callback1</code> and <code>callback2</code>, it will asynchronously call both of them in an unknown order. We can test this with:</p> <p>Le paramètre <code>expect.assertions(number)</code> vérifie qu'un certain nombre d'assertions sont appelées pendant un test. Cela est souvent utile lors de tests de code asynchrone, afin de s'assurer que les assertions d'un rappel ont bien été appelées.</p> <p>Par exemple, disons que nous avons une fonction <code>doAsync</code> qui reçoit deux callbacks <code>callback1</code> et <code>callback2</code>, elle les appellera tous les deux de manière asynchrone dans un ordre inconnu. Nous pouvons tester cela avec :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'doAsync calls both callbacks'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  expect<span class="token punctuation">.</span><span class="token function">assertions</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">callback1</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">callback2</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">doAsync</span><span class="token punctuation">(</span>callback1<span class="token punctuation">,</span> callback2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>L'appel <code>expect.assertions(2)</code> assure que les deux rappels sont effectivement appelés.</p> <h3 id="expect-hasassertions"><a href="#expect-hasassertions" class="header-anchor">#</a> <code>expect.hasAssertions()</code></h3> <p>La fonction <code>expect.hasAssertions()</code> vérifie qu'au moins une assertion est appelée pendant un test. Ceci est souvent utile lors de tests de code asynchrone, afin de s'assurer que les assertions d'un callback ont bien été appelées.</p> <p>Par exemple, disons que nous avons quelques fonctions qui traitent toutes de l'état. <code>prepareState</code> appelle un callback avec un objet d'état, <code>validateState</code> s'exécute sur cet objet d'état, et <code>waitOnState</code> renvoie une promesse qui attend que tous les callbacks <code>prepareState</code> soient terminés. Nous pouvons tester cela avec :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'prepareState prepares a valid state'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  expect<span class="token punctuation">.</span><span class="token function">hasAssertions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">prepareState</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">validateState</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">waitOnState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>L'appel <code>expect.hasAssertions()</code> assure que le rappel <code>prepareState</code> est effectivement appelé.</p> <h3 id="expect-not-arraycontaining-array"><a href="#expect-not-arraycontaining-array" class="header-anchor">#</a> <code>expect.not.arrayContaining(array)</code></h3> <p><code>Expect.not.arrayContaining(array)</code> correspond à un tableau reçu qui ne contient pas tous les éléments du tableau attendu. C'est-à-dire que le tableau attendu <strong>n'est pas un sous-ensemble</strong> du tableau reçu.</p> <p>C'est l'inverse de <code>expect.arrayContaining</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'not.arrayContaining'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> expected <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Samantha'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'matches if the actual array does not contain the expected elements'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Eve'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>
      expect<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="expect-not-objectcontaining-object"><a href="#expect-not-objectcontaining-object" class="header-anchor">#</a> <code>expect.not.objectContaining(object)</code></h3> <p><code>expect.not.objectContaining(object)</code> correspond à tout objet reçu qui ne correspond pas récursivement aux propriétés attendues. C'est-à-dire que l'objet attendu <strong>n'est pas un sous-ensemble</strong> de l'objet reçu. Par conséquent, il correspond à un objet reçu qui contient des propriétés qui ne sont <strong>pas</strong> dans l'objet attendu.</p> <p>C'est l'inverse de <code>expect.objectContaining</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'not.objectContaining'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> expected <span class="token operator">=</span> <span class="token punctuation">{</span>foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'matches if the actual object does not contain expected key: value pairs'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>bar<span class="token operator">:</span> <span class="token string">'baz'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">objectContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="expect-not-stringcontaining-string"><a href="#expect-not-stringcontaining-string" class="header-anchor">#</a> <code>expect.not.stringContaining(string)</code></h3> <p><code>expect.not.stringContaining(string)</code> <code>expect.not.stringContaining(string)</code> vérifie la valeur reçu si ce n'est pas une chaîne de caractères ou si c'est une chaîne qui ne contient pas la chaîne attendue exacte.</p> <p>C'est l'inverse de <code>expect.stringContaining</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'not.stringContaining'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> expected <span class="token operator">=</span> <span class="token string">'Hello world!'</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'matches if the received value does not contain the expected substring'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'How are you?'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">stringContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="expect-not-stringmatching-string-regexp"><a href="#expect-not-stringmatching-string-regexp" class="header-anchor">#</a> <code>expect.not.stringMatching(string | regexp)</code></h3> <p><code>expect.not.stringMatching(string | regexp)</code> correspond à la valeur reçue si ce n'est pas une chaîne ou si c'est une chaîne qui ne correspond pas à la chaîne ou à l'expression régulière attendue.</p> <p>C'est l'inverse de <code>expect.stringMatching</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'not.stringMatching'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> expected <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">Hello world!</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'matches if the received value does not match the expected regex'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'How are you?'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">stringMatching</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="expect-objectcontaining-object"><a href="#expect-objectcontaining-object" class="header-anchor">#</a> <code>expect.objectContaining(object)</code></h3> <p><code>expect.objectContaining(object)</code> correspond à tout objet reçu qui correspond récursivement aux propriétés attendues. Autrement dit, l'objet attendu est un <strong>sous-ensemble</strong> de l'objet reçu. Par conséquent, il correspond à un objet reçu qui contient des propriétés qui <strong>sont présentes</strong> dans l'objet attendu.</p> <p>Au lieu de valeurs de propriétés littérales dans l'objet attendu, vous pouvez utiliser des appariements, <code>expect.anything()</code>, et ainsi de suite.</p> <p>Par exemple, disons que nous nous attendons à ce qu'une fonction <code>onPress</code> soit appelée avec un objet <code>Event</code>, et tout ce que nous devons vérifier est que l'événement a des propriétés <code>event.x</code> et <code>event.y</code>. Nous pouvons faire cela avec :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'onPress gets called with the right thing'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> onPress <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">simulatePresses</span><span class="token punctuation">(</span>onPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>onPress<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span>
    expect<span class="token punctuation">.</span><span class="token function">objectContaining</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      x<span class="token operator">:</span> expect<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">,</span>
      y<span class="token operator">:</span> expect<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="expect-stringcontaining-string"><a href="#expect-stringcontaining-string" class="header-anchor">#</a> <code>expect.stringContaining(string)</code></h3> <p><code>expect.stringContaining(string)</code> correspond à la valeur reçue s'il s'agit d'une chaîne qui contient la chaîne exacte attendue.</p> <h3 id="expect-stringmatching-string-regexp"><a href="#expect-stringmatching-string-regexp" class="header-anchor">#</a> <code>expect.stringMatching(string | regexp)</code></h3> <p>Vous pouvez l'utiliser à la place d'une valeur littérale :</p> <ul><li>dans <code>toEqual</code> ou <code>toBeCalledWith</code>.</li> <li>pour correspondre à un élément dans <code>arrayContaining</code>.</li> <li>pour correspondre à une propriété dans <code>objectContaining</code> ou <code>toMatchObject</code>.</li></ul> <p>Cet exemple montre également comment vous pouvez imbriquer plusieurs correspondants asymétriques, avec <code>expect.stringMatching</code> dans le <code>expect.arrayContaining</code>&quot;.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'stringMatching in arrayContaining'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> expected <span class="token operator">=</span> <span class="token punctuation">[</span>
    expect<span class="token punctuation">.</span><span class="token function">stringMatching</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^Alic</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    expect<span class="token punctuation">.</span><span class="token function">stringMatching</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[BR]ob</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'matches even if received contains additional elements'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Alicia'</span><span class="token punctuation">,</span> <span class="token string">'Roberto'</span><span class="token punctuation">,</span> <span class="token string">'Evelina'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>
      expect<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'does not match if received does not contain expected elements'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Roberto'</span><span class="token punctuation">,</span> <span class="token string">'Evelina'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>
      expect<span class="token punctuation">.</span><span class="token function">arrayContaining</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="expect-addsnapshotserializer-serializer"><a href="#expect-addsnapshotserializer-serializer" class="header-anchor">#</a> <code>expect.addSnapshotSerializer(serializer)</code></h3> <p>Vous pouvez appeler <code>expect.addSnapshotSerializer</code> pour ajouter un module qui formate des structures de données spécifiques à l'application.</p> <p>Pour un fichier de test individuel, un module ajouté précède tous les modules de la configuration de <code>snapshotSerializers</code>, qui précèdent les sérialiseurs snapshot par défaut pour les types JavaScript intégrés et pour les éléments React. Le dernier module ajouté est le premier module testé.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> serializer <span class="token keyword">from</span> <span class="token string">'my-serializer-module'</span><span class="token punctuation">;</span>
expect<span class="token punctuation">.</span><span class="token function">addSnapshotSerializer</span><span class="token punctuation">(</span>serializer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// affecte les assertions expect(value).toMatchSnapshot() dans le fichier de test</span>
</code></pre></div><p>Si vous ajoutez un snapshot sérialiser dans les fichiers de test individuels au lieu de l'ajouter à la configuration de <code>snapshotSerializers</code> :</p> <ul><li>Vous rendez la dépendance explicite au lieu de l'implicite.</li> <li>Vous évitez les limites de configuration qui pourraient vous faire éjecter de <a href="https://github.com/facebookincubator/create-react-app" target="_blank" rel="noopener noreferrer">create-react-app<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ul> <p>Voir <a href="/jest/Configuration.html#snapshotserializers-arraystring">configuring Jest</a> pour plus d'informations.</p> <h3 id="not"><a href="#not" class="header-anchor">#</a> <code>.not</code></h3> <p>Si vous savez comment tester quelque chose, &quot;.not&quot; vous permet de tester son contraire. Par exemple, ce code teste que la meilleure saveur de La Croix n'est pas la noix de coco :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'the best flavor is not coconut'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">bestLaCroixFlavor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'coconut'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="resolves"><a href="#resolves" class="header-anchor">#</a> <code>.resolves</code></h3> <p>Utilisez les <code>resolves</code> pour ouvrir la valeur d'une promesse tenue afin d'enchaîner tout autre partenaire. Si la promesse est rejetée, l'affirmation échoue.</p> <p>Par exemple, ce code teste que la promesse est résolue et que la valeur résultante est <code>'lemon'</code> :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'resolves to lemon'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// s'assurer d'ajouter une déclaration de retour</span>
  <span class="token keyword">return</span> <span class="token function">expect</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'lemon'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>resolves<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'lemon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Notez que, puisque vous testez encore les promesses, le test est toujours asynchrone. Par conséquent, vous devrez <a href="/jest/TestingAsyncCode.html#promises">dire à Jest d'attendre</a> en renvoyant l'affirmation non emballée.</p> <p>Alternativement, vous pouvez utiliser <code>async/await</code> en combinaison avec <code>.resolves</code> :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'resolves to lemon'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'lemon'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>resolves<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'lemon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'lemon'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>resolves<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'octopus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="rejects"><a href="#rejects" class="header-anchor">#</a> <code>.rejects</code></h3> <p>Utilisez <code>.rejects</code> pour ouvrir la raison du rejects d'une promesse afin que tout autre correspondant puisse être enchaîné. Si la promesse est tenue, l'affirmation échoue.</p> <p>Par exemple, ce code teste que la promesse est rejetée avec la raison <code>'octopus'</code> :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'rejects to octopus'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// s'assurer d'ajouter une déclaration de retour</span>
  <span class="token keyword">return</span> <span class="token function">expect</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'octopus'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rejects<span class="token punctuation">.</span><span class="token function">toThrow</span><span class="token punctuation">(</span>
    <span class="token string">'octopus'</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Notez que, puisque vous testez encore les promesses, le test est toujours asynchrone. Par conséquent, vous devrez <a href="/jest/TestingAsyncCode.html#promises">dire à Jest d'attendre</a> en renvoyant l'affirmation non emballée.</p> <p>Vous pouvez aussi utiliser <code>async/await</code> en combinaison avec <code>.rejects</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'rejects to octopus'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'octopus'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rejects<span class="token punctuation">.</span><span class="token function">toThrow</span><span class="token punctuation">(</span><span class="token string">'octopus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tobe-value"><a href="#tobe-value" class="header-anchor">#</a> <code>.toBe(value)</code></h3> <p>Utilisez <code>.toBe</code> pour comparer des valeurs primitives ou pour vérifier l'identité référentielle des instances d'un objet. Il appelle <code>Object.is</code> pour comparer des valeurs, ce qui est encore mieux pour les tests que l'opérateur d'égalité stricte <code>===</code>.</p> <p>Par exemple, ce code va valider certaines propriétés de l'objet <code>can</code> :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> can <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'pamplemousse'</span><span class="token punctuation">,</span>
  ounces<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'the can'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'has 12 ounces'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>can<span class="token punctuation">.</span>ounces<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'has a sophisticated name'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>can<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'pamplemousse'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>N'utilisez pas de &quot;.toBe&quot; avec des nombres à virgule flottante. Par exemple, en raison de l'arrondissement, en JavaScript, <code>0.2 + 0.1</code> n'est pas strictement égal à <code>0.3</code>. Si vous avez des nombres à virgule flottante, essayez plutôt <code>.toBeCloseTo</code>.</p> <p>Bien que l'appariement <code>.toBe</code> vérifie** l'identité référentielle, il <strong>rapporte</strong> une comparaison approfondie des valeurs si l'assertion échoue. Si les différences entre les propriétés ne vous aident pas à comprendre pourquoi un test échoue, en particulier si le rapport est important, alors vous pouvez déplacer la comparaison dans la fonction <code>expect</code>. Par exemple, pour affirmer si des éléments sont la même instance ou non :</p> <ul><li>réécrivez <code>expect(received).toBe(expected)</code> comme <code>expect(Object.is(received, expected)).toBe(true)</code>.</li> <li>réécrire <code>expect(received).not.toBe(expected)</code> comme <code>expect(Object.is(received, expected)).toBe(false)</code>.</li></ul> <h3 id="tohavebeencalled"><a href="#tohavebeencalled" class="header-anchor">#</a> <code>.toHaveBeenCalled()</code></h3> <p>Également sous l'alias : <code>.toBeCalled()</code>.</p> <p>Utilisez <code>toHaveBeenCalled</code> pour vous assurer qu'une fonction fictive a été appelée.</p> <p>Par exemple, disons que vous avez une fonction <code>drinkAll(drink, flavour)</code> qui prend une fonction <code>drink</code> et l'applique à toutes les boissons disponibles. Vous pouvez vérifier que <code>drink</code> est appelé pour <code>&quot;lemon&quot;</code>, mais pas pour <code>&quot;octopus&quot;</code>, parce que le goût <code>&quot;octopus&quot;</code> est vraiment bizarre et pourquoi quelque chose aurait un goût de poulpe ? Vous pouvez faire cela avec cette suite de tests :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">drinkAll</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> flavour</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>flavour <span class="token operator">!==</span> <span class="token string">'octopus'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span>flavour<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'drinkAll'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'drinks something lemon-flavoured'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">drinkAll</span><span class="token punctuation">(</span>drink<span class="token punctuation">,</span> <span class="token string">'lemon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'does not drink something octopus-flavoured'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">drinkAll</span><span class="token punctuation">(</span>drink<span class="token punctuation">,</span> <span class="token string">'octopus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tohavebeencalledtimes-number"><a href="#tohavebeencalledtimes-number" class="header-anchor">#</a> <code>.toHaveBeenCalledTimes(number)</code></h3> <p>Également sous l'alias : <code>.toBeCalledTimes(number)</code></p> <p>Utilisez &quot;toHaveBeenCalledTimes&quot; pour vous assurer qu'une fonction fictive a été appelée le nombre exact de fois.</p> <p>Par exemple, disons que vous avez une fonction <code>drinkEach(drink, Array&lt;flavor&gt;)</code> qui prend une fonction <code>drink</code> et l'applique à un tableau de boissons passées. Vous pourriez vouloir vérifier que la fonction &quot;drink&quot; a été appelée le nombre exact de fois. Vous pouvez le faire avec cette suite de tests :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'drinkEach drinks each drink'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">drinkEach</span><span class="token punctuation">(</span>drink<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'lemon'</span><span class="token punctuation">,</span> <span class="token string">'octopus'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tohavebeencalledwith-arg1-arg2"><a href="#tohavebeencalledwith-arg1-arg2" class="header-anchor">#</a> <code>.toHaveBeenCalledWith(arg1, arg2, ...)</code></h3> <p>Également sous l'alias : <code>.toBeCalledWith()</code></p> <p>Utilisez <code>.toHaveBeenCalledWith</code> pour vous assurer qu'une fonction fictive a été appelée avec des arguments spécifiques.</p> <p>Par exemple, disons que vous pouvez enregistrer une boisson avec une fonction <code>register</code>, et que <code>applyToAll(f)</code> devrait appliquer la fonction <code>f</code> à toutes les boissons enregistrées. Pour être sûr que cela fonctionne, vous pouvez écrire :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'registration applies correctly to orange La Croix'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> beverage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LaCroix</span><span class="token punctuation">(</span><span class="token string">'orange'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">register</span><span class="token punctuation">(</span>beverage<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> f <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">applyToAll</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledWith</span><span class="token punctuation">(</span>beverage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tohavebeenlastcalledwith-arg1-arg2"><a href="#tohavebeenlastcalledwith-arg1-arg2" class="header-anchor">#</a> <code>.toHaveBeenLastCalledWith(arg1, arg2, ...)</code></h3> <p>Également sous l'alias : <code>.lastCalledWith(arg1, arg2, ...)</code></p> <p>Si vous avez une fonction fictive, vous pouvez utiliser <code>.toHaveBeenLastCalledWith</code> pour tester les arguments avec lesquels elle a été appelée en dernier. Par exemple, disons que vous avez une fonction <code>applyToAllFlavors(f)</code> qui applique <code>f</code> à un ensemble de saveurs, et que vous voulez vous assurer que lorsque vous l'appelez, la dernière saveur sur laquelle elle fonctionne est <code>'mango</code>. Vous pouvez écrire :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'applying to all flavors does mango last'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">applyToAllFlavors</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenLastCalledWith</span><span class="token punctuation">(</span><span class="token string">'mango'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tohavebeennthcalledwith-nthcall-arg1-arg2"><a href="#tohavebeennthcalledwith-nthcall-arg1-arg2" class="header-anchor">#</a> <code>.toHaveBeenNthCalledWith(nthCall, arg1, arg2, ....)</code></h3> <p>Également sous l'alias : <code>.nthCalledWith(nthCall, arg1, arg2, ...)</code></p> <p>Si vous avez une fonction fictive, vous pouvez utiliser <code>.toHaveBeenNthCalledWith</code> pour tester les arguments avec lesquels elle a été appelée. Par exemple, supposons que vous ayez une fonction <code>drinkEach(drink, Array&lt;flavor&gt;)</code> qui applique <code>f</code> à un ensemble de saveurs, et que vous vouliez vous assurer que lorsque vous l'appelez, la première saveur sur laquelle elle fonctionne est <code>lemon</code> et la seconde est 'octopus'. Vous pouvez écrire :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'drinkEach drinks each drink'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">drinkEach</span><span class="token punctuation">(</span>drink<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'lemon'</span><span class="token punctuation">,</span> <span class="token string">'octopus'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenNthCalledWith</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'lemon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenNthCalledWith</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'octopus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Note : le nième argument doit être un nombre entier positif à partir de 1.</p> <h3 id="tohavereturned"><a href="#tohavereturned" class="header-anchor">#</a> <code>.toHaveReturned()</code></h3> <p>Également sous l'alias : <code>.toReturn()</code></p> <p>Si vous disposez d'une fonction fictive, vous pouvez utiliser <code>.toHaveReturned</code> pour tester que la fonction fictive est bien retournée (c'est-à-dire qu'elle n'a pas lancé d'erreur) au moins une fois. Par exemple, disons que vous avez une &quot;boisson&quot; fictive qui renvoie <code>true</code>. Vous pouvez écrire :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'drinks returns'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">drink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveReturned</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tohavereturnedtimes-number"><a href="#tohavereturnedtimes-number" class="header-anchor">#</a> <code>.toHaveReturnedTimes(number)</code></h3> <p>Également sous l'alias : <code>.toReturnTimes(number)</code></p> <p>Utilisez <code>.toHaveReturnedTimes</code> pour vous assurer qu'une fonction fictive est retournée avec succès (c'est-à-dire qu'elle n'a pas lancé d'erreur) un nombre exact de fois. Tout appel à la fonction fictive qui provoque une erreur n'est pas comptabilisé dans le nombre de fois où la fonction est retournée.</p> <p>Par exemple, disons que vous avez une &quot;boisson&quot; fictive qui renvoie <code>true</code>. Vous pouvez écrire :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'drink returns twice'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">drink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">drink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveReturnedTimes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tohavereturnedwith-value"><a href="#tohavereturnedwith-value" class="header-anchor">#</a> <code>.toHaveReturnedWith(value)</code></h3> <p>Également sous l'alias : <code>.toReturnWith(value)</code></p> <p>Utilisez <code>.toHaveReturnedWith</code> pour vous assurer qu'une fonction fictive renvoie une valeur spécifique.</p> <p>Par exemple, disons que vous avez une &quot;boisson&quot; fictive qui renvoie le nom de la boisson qui a été consommée. Vous pouvez écrire :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'drink returns La Croix'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> beverage <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'La Croix'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">beverage</span> <span class="token operator">=&gt;</span> beverage<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">drink</span><span class="token punctuation">(</span>beverage<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveReturnedWith</span><span class="token punctuation">(</span><span class="token string">'La Croix'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tohavelastreturnedwith-value"><a href="#tohavelastreturnedwith-value" class="header-anchor">#</a> <code>.toHaveLastReturnedWith(value)</code></h3> <p>Également sous l'alias : <code>.lastReturnedWith(value)</code></p> <p>Utilisez <code>.toHaveLastReturnedWith</code> pour tester la valeur spécifique qu'une fonction fictive a renvoyée en dernier. Si le dernier appel à la fonction fictive a provoqué une erreur, alors ce comparateur échouera, quelle que soit la valeur que vous avez fournie comme valeur de retour attendue.</p> <p>Par exemple, disons que vous avez une &quot;boisson&quot; fictive qui renvoie le nom de la boisson qui a été consommée. Vous pouvez écrire :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'drink returns La Croix (Orange) last'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> beverage1 <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'La Croix (Lemon)'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> beverage2 <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'La Croix (Orange)'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">beverage</span> <span class="token operator">=&gt;</span> beverage<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">drink</span><span class="token punctuation">(</span>beverage1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">drink</span><span class="token punctuation">(</span>beverage2<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveLastReturnedWith</span><span class="token punctuation">(</span><span class="token string">'La Croix (Orange)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tohaventhreturnedwith-nthcall-value"><a href="#tohaventhreturnedwith-nthcall-value" class="header-anchor">#</a> <code>.toHaveNthReturnedWith(nthCall, value)</code></h3> <p>Également sous l'alias : <code>.nthReturnedWith(nthCall, value)</code></p> <p>Utilisez <code>.toHaveNthReturnedWith</code> pour tester la valeur spécifique qu'une fonction fictive a renvoyée pour le nième appel. Si le nième appel à la fonction fictive a lancé une erreur, alors ce comparateur échouera quelle que soit la valeur que vous avez fournie comme valeur de retour attendue.</p> <p>Par exemple, disons que vous avez une &quot;boisson&quot; fictive qui renvoie le nom de la boisson qui a été consommée. Vous pouvez écrire :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'drink returns expected nth calls'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> beverage1 <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'La Croix (Lemon)'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> beverage2 <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'La Croix (Orange)'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> drink <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">beverage</span> <span class="token operator">=&gt;</span> beverage<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">drink</span><span class="token punctuation">(</span>beverage1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">drink</span><span class="token punctuation">(</span>beverage2<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveNthReturnedWith</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'La Croix (Lemon)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drink<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveNthReturnedWith</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'La Croix (Orange)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Note : le nième argument doit être un nombre entier positif à partir de 1.</p> <h3 id="tohavelength-number"><a href="#tohavelength-number" class="header-anchor">#</a> <code>.toHaveLength(number)</code></h3> <p>Utilisez <code>.toHaveLength</code> pour vérifier qu'un objet a une propriété <code>.length</code> et qu'il est défini à une certaine valeur numérique.</p> <p>Ceci est particulièrement utile pour vérifier la taille des tableaux ou des chaînes de caractères.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveLength</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveLength</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toHaveLength</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tohaveproperty-keypath-value"><a href="#tohaveproperty-keypath-value" class="header-anchor">#</a> <code>.toHaveProperty(keyPath, value?)</code></h3> <p>Utilisez <code>.toHaveProperty</code> pour vérifier si la propriété à la référence fournie <code>keyPath</code> existe pour un objet. Pour vérifier les propriétés profondément imbriquées dans un objet, vous pouvez utiliser la <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Property_accessors" target="_blank" rel="noopener noreferrer">notation par points<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ou un tableau contenant le keyPath pour les références profondes.</p> <p>Vous pouvez fournir un argument optionnel &quot;value&quot; pour comparer la valeur de la propriété reçue (récursivement pour toutes les propriétés des instances d'un objet, également connu sous le nom d'égalité profonde, comme le comparateur &quot;toEqual&quot;).</p> <p>L'exemple suivant contient un objet &quot;houseForSale&quot; avec des propriétés imbriquées. Nous utilisons &quot;toHaveProperty&quot; pour vérifier l'existence et les valeurs des différentes propriétés de l'objet.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Object containing house features to be tested</span>
<span class="token keyword">const</span> houseForSale <span class="token operator">=</span> <span class="token punctuation">{</span>
  bath<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  bedrooms<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
  kitchen<span class="token operator">:</span> <span class="token punctuation">{</span>
    amenities<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'oven'</span><span class="token punctuation">,</span> <span class="token string">'stove'</span><span class="token punctuation">,</span> <span class="token string">'washer'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    area<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    wallColor<span class="token operator">:</span> <span class="token string">'white'</span><span class="token punctuation">,</span>
    <span class="token string">'nice.oven'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'ceiling.height'</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'this house has my desired features'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Example Referencing</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'bath'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'bedrooms'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'pool'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Deep referencing using dot notation</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'kitchen.area'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'kitchen.amenities'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string">'oven'</span><span class="token punctuation">,</span>
    <span class="token string">'stove'</span><span class="token punctuation">,</span>
    <span class="token string">'washer'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'kitchen.open'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Deep referencing using an array containing the keyPath</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'kitchen'</span><span class="token punctuation">,</span> <span class="token string">'area'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token string">'kitchen'</span><span class="token punctuation">,</span> <span class="token string">'amenities'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">'oven'</span><span class="token punctuation">,</span> <span class="token string">'stove'</span><span class="token punctuation">,</span> <span class="token string">'washer'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'kitchen'</span><span class="token punctuation">,</span> <span class="token string">'amenities'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'oven'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'kitchen'</span><span class="token punctuation">,</span> <span class="token string">'nice.oven'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'kitchen'</span><span class="token punctuation">,</span> <span class="token string">'open'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Referencing keys with dot in the key itself</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveProperty</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'ceiling.height'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'tall'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tobecloseto-number-numdigits"><a href="#tobecloseto-number-numdigits" class="header-anchor">#</a> <code>.toBeCloseTo(number, numDigits?)</code></h3> <p>Utilisez <code>toBeCloseTo</code> pour comparer des nombres à virgule flottante pour une égalité approximative.</p> <p>L'argument optionnel <code>numDigits</code> limite le nombre de chiffres à vérifier <strong>après</strong> la virgule décimale. Pour la valeur par défaut <code>2</code>, le critère de test est <code>Math.abs(expected - received) &lt; 0.005</code> (c'est-à-dire <code>10 ** -2 / 2</code>).</p> <p>Les comparaisons intuitives d'égalité échouent souvent, car l'arithmétique sur les valeurs décimales (base 10) comporte souvent des erreurs d'arrondi dans la représentation binaire de précision limitée (base 2). Par exemple, ce test échoue :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'adding works sanely with decimals'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">0.2</span> <span class="token operator">+</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Fails!</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Il échoue parce qu'en JavaScript, <code>0.2 + 0.1</code> est en fait <code>0.30000000000000004</code>.</p> <p>Par exemple, ce test est réussi avec une précision de 5 chiffres :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'adding works sanely with decimals'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">0.2</span> <span class="token operator">+</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCloseTo</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Parce que les erreurs en virgule flottante sont le problème que <code>toBeCloseTo</code> résout, il ne supporte pas les grandes valeurs entières.</p> <h3 id="tobedefined"><a href="#tobedefined" class="header-anchor">#</a> <code>.toBeDefined()</code></h3> <p>Utilisez <code>.toBeDefined</code> pour vérifier qu'une variable n'est pas indéfinie. Par exemple, si vous voulez vérifier qu'une fonction <code>fetchNewFlavorIdea()</code> renvoie <em>quelque chose</em>, vous pouvez écrire :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'there is a new flavor idea'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">fetchNewFlavorIdea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeDefined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Vous pourriez écrire <code>expect(fetchNewFlavorIdea()).not.toBe(undefined)</code>, mais il est préférable d'éviter de faire référence à <code>undefined</code> directement dans votre code.</p> <h3 id="tobefalsy"><a href="#tobefalsy" class="header-anchor">#</a> <code>.toBeFalsy()</code></h3> <p>Utilisez <code>.toBeFalsy</code> lorsque vous ne vous souciez pas de la valeur et que vous voulez vous assurer qu'une valeur est fausse dans un contexte booléen. Par exemple, disons que vous avez un code d'application qui ressemble à :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">drinkSomeLaCroix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">getErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">drinkMoreLaCroix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Vous pouvez ne pas vous soucier de ce que <code>getErrors</code> renvoie, en particulier - il peut renvoyer <code>false</code>, <code>null</code>, ou <code>0</code>, et votre code fonctionnera quand même. Donc si vous voulez tester qu'il n'y a pas d'erreurs après avoir bu un peu de La Croix, vous pouvez écrire :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'drinking La Croix does not lead to errors'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">drinkSomeLaCroix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeFalsy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>En JavaScript, il y a six valeurs erronées : <code>false</code>, <code>0</code>, <code>''</code>, <code>null</code>, <code>undefined</code>, et <code>NaN</code>. Tout le reste est vrai.</p> <h3 id="tobegreaterthan-number-bigint"><a href="#tobegreaterthan-number-bigint" class="header-anchor">#</a> <code>.toBeGreaterThan(number | bigint)</code></h3> <p>Utilisez <code>toBeGreaterThan</code> pour comparer <code>received &gt; expected</code> pour des valeurs numériques ou de grands nombres entiers. Par exemple, testez que <code>ouncesPerCan()</code> renvoie une valeur de plus de 10 onces :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'ounces per can is more than 10'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">ouncesPerCan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeGreaterThan</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tobegreaterthanorequal-number-bigint"><a href="#tobegreaterthanorequal-number-bigint" class="header-anchor">#</a> <code>.toBeGreaterThanOrEqual(number | bigint)</code></h3> <p>Utilisez <code>toBeGreaterThanOrEqual</code> pour comparer <code>received &lt;= expected</code> pour les nombres ou les grands nombres. Par exemple, testez que <code>ouncesPerCan()</code> renvoie une valeur d'au moins 12 onces :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'ounces per can is at least 12'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">ouncesPerCan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeGreaterThanOrEqual</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tobelessthan-number-bigint"><a href="#tobelessthan-number-bigint" class="header-anchor">#</a> <code>.toBeLessThan(number | bigint)</code></h3> <p>Utilisez <code>toBeLessThan</code> pour comparer <code>received &lt; expected</code> pour des valeurs numériques ou de grands nombres entiers. Par exemple, testez que <code>ouncesPerCan()</code> renvoie une valeur inférieure à 20 onces :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'ounces per can is less than 20'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">ouncesPerCan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeLessThan</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tobelessthanorequal-number-bigint"><a href="#tobelessthanorequal-number-bigint" class="header-anchor">#</a> <code>.toBeLessThanOrEqual(number | bigint)</code></h3> <p>Utilisez <code>toBeLessThanOrEqual</code> pour comparer <code>received &lt;= expected</code> pour des valeurs numériques ou de grands nombres entiers. Par exemple, testez que <code>ouncesPerCan()</code> renvoie une valeur d'au plus 12 onces :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'ounces per can is at most 12'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">ouncesPerCan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeLessThanOrEqual</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tobeinstanceof-class"><a href="#tobeinstanceof-class" class="header-anchor">#</a> <code>.toBeInstanceOf(Class)</code></h3> <p>Utilisez <code>.toBeInstanceOf(Class)</code> pour vérifier qu'un objet est une instance d'une classe. Ce comparateur utilise <code>instanceof</code> en dessous.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInstanceOf</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInstanceOf</span><span class="token punctuation">(</span>Function<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInstanceOf</span><span class="token punctuation">(</span>Function<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// throws</span>
</code></pre></div><h3 id="tobenull"><a href="#tobenull" class="header-anchor">#</a> <code>.toBeNull()</code></h3> <p><code>.toBeNull()</code> est le même que <code>.toBe(null)</code> mais les messages d'erreur sont un peu plus beaux. Utilisez donc <code>.toBeNull()</code> lorsque vous voulez vérifier que quelque chose est nul.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">bloop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'bloop returns null'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">bloop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tobetruthy"><a href="#tobetruthy" class="header-anchor">#</a> <code>.toBeTruthy()</code></h3> <p>Utilisez <code>.toBeTruthy</code> lorsque vous ne vous souciez pas de la valeur et que vous voulez vous assurer qu'une valeur est vraie dans un contexte booléen. Par exemple, disons que vous avez un code d'application qui ressemble à :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">drinkSomeLaCroix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">thirstInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">drinkMoreLaCroix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Vous pouvez ne pas vous soucier de ce que <code>thirstInfo</code> renvoie, en particulier - il pourrait renvoyer <code>true</code> ou un objet complexe, et votre code fonctionnerait toujours. Donc si vous voulez tester que <code>thirstInfo</code> sera vrai après avoir bu un peu de La Croix, vous pouvez écrire :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'drinking La Croix leads to having thirst info'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">drinkSomeLaCroix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">thirstInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>En JavaScript, il y a six valeurs erronées : <code>false</code>, <code>0</code>, <code>''</code>, <code>null</code>, <code>undefined</code>, and <code>NaN</code>. Tout le reste est vrai.</p> <h3 id="tobeundefined"><a href="#tobeundefined" class="header-anchor">#</a> <code>.toBeUndefined()</code></h3> <p>Utilisez &quot;toBeUndefined&quot; pour vérifier qu'une variable est bien indéfinie. Par exemple, si vous voulez vérifier qu'une fonction <code>bestDrinkForFlavor(flavor)</code> renvoie <code>undefined</code> pour la saveur <code>octopus</code>, parce qu'il n'y a pas de bonne boisson au goût de pieuvre :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'the best drink for octopus flavor is undefined'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">bestDrinkForFlavor</span><span class="token punctuation">(</span><span class="token string">'octopus'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeUndefined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Vous pourriez écrire <code>expect(bestDrinkForFlavor('octopus')).toBe(undefined)</code>, mais il est préférable d'éviter de faire référence à <code>undefined</code> directement dans votre code.</p> <h3 id="tobenan"><a href="#tobenan" class="header-anchor">#</a> <code>.toBeNaN()</code></h3> <p>Use <code>.toBeNaN</code> when checking a value is <code>NaN</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'passes when value is NaN'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeNaN</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBeNaN</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tocontain-item"><a href="#tocontain-item" class="header-anchor">#</a> <code>.toContain(item)</code></h3> <p>Utilisez <code>.toContain</code> lorsque vous voulez vérifier qu'un élément se trouve dans un tableau. Pour tester les éléments du tableau, on utilise <code>===</code>, une vérification stricte de l'égalité. Le <code>.toContain</code> peut également vérifier si une chaîne est une sous-chaîne d'une autre chaîne.</p> <p>Par exemple, si <code>getAllFlavors()</code> renvoie un tableau de saveurs et que vous voulez être sûr que <code>lime</code> y est, vous pouvez écrire :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'the flavor list contains lime'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getAllFlavors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">'lime'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tocontainequal-item"><a href="#tocontainequal-item" class="header-anchor">#</a> <code>.toContainEqual(item)</code></h3> <p>Utilisez <code>.toContainEqual</code> lorsque vous voulez vérifier qu'un élément avec une structure et des valeurs spécifiques est contenu dans un tableau. Pour tester les éléments dans le tableau, cet appariement vérifie récursivement l'égalité de tous les champs, plutôt que de vérifier l'identité de l'objet.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'my beverage'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'is delicious and not sour'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> myBeverage <span class="token operator">=</span> <span class="token punctuation">{</span>delicious<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> sour<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myBeverages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContainEqual</span><span class="token punctuation">(</span>myBeverage<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="toequal-value"><a href="#toequal-value" class="header-anchor">#</a> <code>.toEqual(value)</code></h3> <p>Utilisez <code>.toEqual</code> pour comparer récursivement toutes les propriétés des instances d'objets (aussi appelé égalité &quot;profonde&quot;). Il appelle <code>Object.is</code> pour comparer les valeurs primitives, ce qui est encore mieux pour les tests que l'opérateur d'égalité stricte <code>===</code>.</p> <p>Par exemple, <code>.toEqual</code> et <code>.toBe</code> se comportent différemment dans cette suite de tests, donc tous les tests passent :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> can1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  flavor<span class="token operator">:</span> <span class="token string">'grapefruit'</span><span class="token punctuation">,</span>
  ounces<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> can2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  flavor<span class="token operator">:</span> <span class="token string">'grapefruit'</span><span class="token punctuation">,</span>
  ounces<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'the La Croix cans on my desk'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'have all the same properties'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>can1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>can2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'are not the exact same can'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>can1<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span>can2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>Note : <code>.toEqual</code> n'effectuera pas une vérification <em>profonde de l'égalité</em> pour deux erreurs. Seule la propriété <code>message</code> d'une erreur est prise en compte pour l'égalité. Il est recommandé d'utiliser l'appariement <code>.toThrow</code> pour tester les erreurs.</p></blockquote> <p>Si les différences entre les propriétés ne vous aident pas à comprendre pourquoi un test échoue, en particulier si le rapport est volumineux, vous pouvez alors déplacer la comparaison dans la fonction &quot;attendre&quot;. Par exemple, utilisez la méthode des &quot;égaux&quot; de la classe &quot;buffer&quot; pour déterminer si les tampons contiennent ou non le même contenu :</p> <ul><li>réécrivez <code>expect(received).toEqual(expected)</code> comme <code>expect(received.equals(expected)).toBe(true)</code>.</li> <li>réécrire <code>expect(received).not.toEqual(expected)</code> comme <code>expect(received.equals(expected)).toBe(false)</code>.</li></ul> <h3 id="tomatch-regexporstring"><a href="#tomatch-regexporstring" class="header-anchor">#</a> <code>.toMatch(regexpOrString)</code></h3> <p>Utilisez <code>.toMatch</code> pour vérifier qu'une chaîne de caractères correspond à une expression régulière.</p> <p>Par exemple, vous ne savez peut-être pas ce que retourne exactement <code>essayOnTheBestFlavor()</code>, mais vous savez que c'est une très longue chaîne, et que la sous-chaîne <code>grapefruit</code> devrait être là quelque part. Vous pouvez tester cela avec :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'an essay on the best flavor'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'mentions grapefruit'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">essayOnTheBestFlavor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatch</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">grapefruit</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">essayOnTheBestFlavor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatch</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'grapefruit'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Ce jumelage accepte également avec une chaîne de caractère, qu'il essaiera de faire correspondre :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'grapefruits are healthy'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'grapefruits are a fruit'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'grapefruits'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatch</span><span class="token punctuation">(</span><span class="token string">'fruit'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tomatchobject-object"><a href="#tomatchobject-object" class="header-anchor">#</a> <code>.toMatchObject(object)</code></h3> <p>Utilisez <code>.toMatchObject</code> pour vérifier qu'un objet JavaScript correspond à un sous-ensemble des propriétés d'un objet. Il fera correspondre les objets reçus avec les propriétés qui ne sont pas <strong>non</strong> dans l'objet attendu.</p> <p>Vous pouvez également passer un tableau d'objets, auquel cas la méthode ne retournera vrai que si chaque objet du tableau reçu correspond (au sens &quot;toMatchObject&quot; décrit ci-dessus) à l'objet correspondant du tableau attendu. Ceci est utile si vous voulez vérifier que deux tableaux correspondent dans leur nombre d'éléments, par opposition à &quot;arrayContaining&quot;, qui permet d'ajouter des éléments supplémentaires dans le tableau reçu.</p> <p>Vous pouvez faire correspondre des propriétés à des valeurs ou à des éléments correspondants.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> houseForSale <span class="token operator">=</span> <span class="token punctuation">{</span>
  bath<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  bedrooms<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
  kitchen<span class="token operator">:</span> <span class="token punctuation">{</span>
    amenities<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'oven'</span><span class="token punctuation">,</span> <span class="token string">'stove'</span><span class="token punctuation">,</span> <span class="token string">'washer'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    area<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    wallColor<span class="token operator">:</span> <span class="token string">'white'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> desiredHouse <span class="token operator">=</span> <span class="token punctuation">{</span>
  bath<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  kitchen<span class="token operator">:</span> <span class="token punctuation">{</span>
    amenities<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'oven'</span><span class="token punctuation">,</span> <span class="token string">'stove'</span><span class="token punctuation">,</span> <span class="token string">'washer'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    wallColor<span class="token operator">:</span> expect<span class="token punctuation">.</span><span class="token function">stringMatching</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">white|yellow</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'the house has my desired features'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>houseForSale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchObject</span><span class="token punctuation">(</span>desiredHouse<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'toMatchObject applied to arrays'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'the number of elements must match exactly'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>baz<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchObject</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>baz<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'.toMatchObject is called for each elements, so extra object properties are okay'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>baz<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> extra<span class="token operator">:</span> <span class="token string">'quux'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchObject</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>baz<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tomatchsnapshot-propertymatchers-hint"><a href="#tomatchsnapshot-propertymatchers-hint" class="header-anchor">#</a> <code>.toMatchSnapshot(propertyMatchers?, hint?)</code></h3> <p>Cela permet de s'assurer qu'une valeur correspond à l'instantané le plus récent. Consultez le [guide de test des instantanés] (SnapshotTesting.md) pour plus d'informations.</p> <p>Vous pouvez fournir un argument optionnel pour l'objet <code>propertyMatchers</code>, qui a des matchers asymétriques comme valeurs d'un sous-ensemble de propriétés attendues, <strong>si</strong> la valeur reçue sera une instance <strong>objet</strong>. C'est comme un <code>toMatchObject</code> avec des critères flexibles pour un sous-ensemble de propriétés, suivi d'un test d'instantané comme critère exact pour le reste des propriétés.</p> <p>Vous pouvez fournir un argument optionnel sous forme de chaîne de caractères &quot;indice&quot; qui est ajouté au nom du test. Bien que Jest ajoute toujours un nombre à la fin du nom de l'instantané, de courts indices descriptifs peuvent être plus utiles que des nombres pour différencier les <strong>multiples</strong> instantanés dans un bloc <strong>single</strong> <code>it</code> ou <code>test</code>. Jest trie les instantanés par nom dans le fichier &quot;.snap&quot; correspondant.</p> <h3 id="tomatchinlinesnapshot-propertymatchers-inlinesnapshot"><a href="#tomatchinlinesnapshot-propertymatchers-inlinesnapshot" class="header-anchor">#</a> <code>.toMatchInlineSnapshot(propertyMatchers?, inlineSnapshot)</code></h3> <p>S'assure qu'une valeur correspond à l'instantané le plus récent.</p> <p>Vous pouvez fournir un argument optionnel pour l'objet <code>propertyMatchers</code>, qui a des matchers asymétriques comme valeurs d'un sous-ensemble de propriétés attendues, <strong>si</strong> la valeur reçue sera une instance <strong>objet</strong>. C'est comme un <code>toMatchObject</code> avec des critères flexibles pour un sous-ensemble de propriétés, suivi d'un test d'instantané comme critère exact pour le reste des propriétés.</p> <p>Jest ajoute l'argument chaîne <code>inlineSnapshot</code> au matchcher dans le fichier de test (au lieu d'un fichier <code>.snap</code> externe) la première fois que le test est exécuté.</p> <p>Consultez la section <a href="/jest/SnapshotTesting.html#inline-snapshots">Inline Snapshots</a> pour plus d'informations.</p> <h3 id="tostrictequal-value"><a href="#tostrictequal-value" class="header-anchor">#</a> <code>.toStrictEqual(value)</code></h3> <p>Utilisez <code>.toStrictEqual</code> pour tester que les objets ont les mêmes types ainsi que la même structure.</p> <p>Différences par rapport à <code>.toEqual</code> :</p> <ul><li>Les clés avec des propriétés <code>undefined</code> sont vérifiées. Par exemple, <code>{a : undefined, b : 2}</code> ne correspond pas à <code>{b: 2}</code> lorsque l'on utilise le <code>.toStrictEqual</code>.</li> <li>La dispersion des tableaux est vérifiée. par exemple, <code>[, 1]</code> ne correspond pas à <code>[undefined, 1]</code> quand on utilise <code>.toStrictEqual</code>.</li> <li>Les types d'objets sont vérifiés pour être égaux. Par exemple, une instance de classe avec les champs <code>a</code> et <code>b</code> ne sera pas égale à un objet littéral avec les champs <code>a</code> et <code>b</code>.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">LaCroix</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">flavor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>flavor <span class="token operator">=</span> flavor<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'the La Croix cans on my desk'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'are not semantically the same'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LaCroix</span><span class="token punctuation">(</span><span class="token string">'lemon'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span>flavor<span class="token operator">:</span> <span class="token string">'lemon'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LaCroix</span><span class="token punctuation">(</span><span class="token string">'lemon'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toStrictEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span>flavor<span class="token operator">:</span> <span class="token string">'lemon'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tothrow-error"><a href="#tothrow-error" class="header-anchor">#</a> <code>.toThrow(error?)</code></h3> <p>Également sous le pseudonyme : &quot;.toThrowError(error ?)`</p> <p>Utilisez <code>.toThrow</code> pour tester qu'une fonction lance lorsqu'elle est appelée. Par exemple, si nous voulons tester le lancer de <code>drinkFlavor('octopus')</code>, parce que la saveur du poulpe est trop dégoûtante pour être bue, nous pouvons écrire :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'throws on octopus'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">drinkFlavor</span><span class="token punctuation">(</span><span class="token string">'octopus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>Note : Vous devez envelopper le code dans une fonction, sinon l'erreur ne sera pas détectée et l'assertion échouera.</p></blockquote> <p>Vous pouvez fournir un argument optionnel pour vérifier qu'une erreur spécifique est lancée :</p> <ul><li>expression régulière : message d'erreur **correspond au modèle</li> <li>string : message d'erreur <strong>inclut</strong> la sous-chaîne</li> <li>objet d'erreur : le message d'erreur est <strong>égale à</strong> la propriété de message de l'objet</li> <li>classe d'erreur : l'objet d'erreur est <strong>instance de</strong> classe</li></ul> <p>Par exemple, disons que <code>drinkFlavor</code> est codé comme ceci :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">drinkFlavor</span><span class="token punctuation">(</span><span class="token parameter">flavor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>flavor <span class="token operator">==</span> <span class="token string">'octopus'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">DisgustingFlavorError</span><span class="token punctuation">(</span><span class="token string">'yuck, octopus flavor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Faire d'autres choses</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Nous pourrions tester cette erreur est jetée de plusieurs façons :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'throws on octopus'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">drinkOctopus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">drinkFlavor</span><span class="token punctuation">(</span><span class="token string">'octopus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Vérifiez que le message d'erreur dit &quot;beurk&quot; quelque part : ils sont équivalents</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drinkOctopus<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrowError</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">yuck</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drinkOctopus<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrowError</span><span class="token punctuation">(</span><span class="token string">'yuck'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Tester le message d'erreur exact</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drinkOctopus<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrowError</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^yuck, octopus flavor$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drinkOctopus<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrowError</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'yuck, octopus flavor'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Tester que nous obtenons une erreur de goût dégoûtante</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>drinkOctopus<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrowError</span><span class="token punctuation">(</span>DisgustingFlavorError<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="tothrowerrormatchingsnapshot-hint"><a href="#tothrowerrormatchingsnapshot-hint" class="header-anchor">#</a> <code>.toThrowErrorMatchingSnapshot(hint?)</code></h3> <p>Utilisez <code>.toThrowErrorMatchingSnapshot</code> pour tester qu'une fonction lance une erreur correspondant à l'instantané le plus récent lorsqu'elle est appelée.</p> <p>Vous pouvez fournir un argument optionnel sous forme de chaîne de caractères <code>hint</code> qui est ajouté au nom du test. Bien que Jest ajoute toujours un nombre à la fin du nom de l'instantané, de courts indices descriptifs peuvent être plus utiles que des nombres pour différencier les <strong>multiples</strong> instantanés dans un bloc <strong>single</strong> <code>it</code> ou <code>test</code>. Jest trie les instantanés par nom dans le fichier &quot;.snap&quot; correspondant.</p> <p>Par exemple, disons que vous avez une fonction <code>drinkFlavor</code> qui lance chaque fois que la saveur est <code>'octopus'</code>, et qui est codée comme ceci :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">drinkFlavor</span><span class="token punctuation">(</span><span class="token parameter">flavor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>flavor <span class="token operator">==</span> <span class="token string">'octopus'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">DisgustingFlavorError</span><span class="token punctuation">(</span><span class="token string">'yuck, octopus flavor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Faire d'autres choses</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Le test de cette fonction se présentera ainsi :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'throws on octopus'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">drinkOctopus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">drinkFlavor</span><span class="token punctuation">(</span><span class="token string">'octopus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>drinkOctopus<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrowErrorMatchingSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Et il générera l'instantané suivant :</p> <div class="language-js extra-class"><pre class="language-js"><code>exports<span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">drinking flavors throws on octopus 1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&quot;yuck, octopus flavor&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><p>Consultez le site [React Tree Snapshot Testing] (https://jestjs.io/blog/2016/07/27/jest-14.html) pour plus d'informations sur les tests instantanés.</p> <h3 id="tothrowerrormatchinginlinesnapshot-inlinesnapshot"><a href="#tothrowerrormatchinginlinesnapshot-inlinesnapshot" class="header-anchor">#</a> <code>.toThrowErrorMatchingInlineSnapshot(inlineSnapshot)</code></h3> <p>Utilisez <code>.toThrowErrorMatchingInlineSnapshot</code> pour tester qu'une fonction lance une erreur correspondant à l'instantané le plus récent lorsqu'elle est appelée.</p> <p>Jest ajoute l'argument chaîne <code>inlineSnapshot</code> au matcher dans le fichier de test (au lieu d'un fichier externe <code>.snap</code>) la première fois que le test est lancé.</p> <p>Consultez la section <a href="/jest/SnapshotTesting.html#inline-snapshots">Inline Snapshots</a> pour plus d'informations.</p></AUTOGENERATED_TABLE_OF_CONTENTS></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1dfb11b9.js" defer></script><script src="/assets/js/2.76e9c098.js" defer></script><script src="/assets/js/16.2062fdae.js" defer></script>
  </body>
</html>
